$(document).ready(function(){$("body").raptorize()});(function(e){jQuery.browser={};jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());e.fn.raptorize=function(t){var n={enterOn:"konami-code",delayTime:5e3};var t=e.extend(n,t);return this.each(function(){function a(){o=true;var t=e("#elRaptor").css({display:"block",position:"fixed",bottom:0,"z-index":99999});if(r){function n(){document.getElementById("elRaptorShriek").play()}n()}t.animate({bottom:"0px"},function(){e(this).animate({bottom:"0px"},100,function(){var t=e(this).position().left+400;e(this).delay(300).animate({right:t},2200,function(){o=false})})})}var n=e(this);var r=false;if(e.browser.mozilla||e.browser.webkit)r=true;var i='<img id="elRaptor" style="display: none" src="img/raptor.png" />';var s='<audio id="elRaptorShriek" preload="auto"><source src="audio/raptor-sound.mp3" /><source src="audio/raptor-sound.ogg" /></audio>';var o=false;e("body").append(i);if(r)e("body").append(s);var u=e("#elRaptor").css({position:"fixed",bottom:"-300px",right:"0",display:"none"});if(t.enterOn=="timer")setTimeout(a,t.delayTime);else if(t.enterOn=="click")n.bind("click",function(e){e.preventDefault();if(!o)a()});else if(t.enterOn=="konami-code"){var f=[],l="38,38,40,40,37,39,37,39,66,65";e(window).bind("keydown.raptorz",function(t){f.push(t.keyCode);if(f.toString().indexOf(l)>=0){a();e(window).unbind("keydown.raptorz")}})}})}})(jQuery);var wesual=wesual||{};wesual={$sections:$("section, footer"),sectionOffsets:[],init:function(){this.preloader.init();this.fonts.init();this.slider.init();this.bindEvents();this.getSectionOffsets();this.mailChimpForm.init()},bindEvents:function(){var e=this,t=2200;console.log($(window).scrollTop());if($(window).scrollTop()>400)t=18;setTimeout(function(){$(window).on("scroll",$.proxy(e.onScroll,e));setTimeout(function(){$(window).trigger("scroll");$(window).trigger("scroll");$(window).trigger("scroll");$(window).trigger("scroll")},25)},t)},getSectionOffsets:function(){var e=this;this.$sections.each(function(){e.sectionOffsets.push($(this).offset().top)})},onScroll:function(e){var t=250,n=$(window).scrollTop()+$(window).innerHeight()-t;for(var r=0;r<=this.sectionOffsets.length;++r){if(n>=this.sectionOffsets[r]){if(this.$sections.not(".active").first().hasClass("telegraphic")){this.slider.startAutoSlide()}this.$sections.not(".active").first().addClass("active");this.sectionOffsets.shift();break}}if(!this.sectionOffsets.length){$(window).off("scroll")}}};wesual.preloader={images:["img/tv.png","img/tv-top.jpg","img/tv-glare.png","img/mbp.png","img/slide-1.jpg","img/slide-2.jpg","img/slide-3.jpg","img/slide-4.jpg","img/slide-5.jpg","img/telegraphic-bg.jpg"],init:function(){var e=new PxLoader;for(var t=0;t<this.images.length;++t){e.addImage(this.images[t])}e.addCompletionListener(function(){setTimeout(function(){$(".hero").addClass("active")},100)});e.start()}};wesual.fonts={init:function(){this.initWebFontLoader()},initWebFontLoader:function(){WebFont.load({google:{families:["Open Sans"]},custom:{families:["Grumpy Black 24"]}});this.initMyFonts()},initMyFonts:function(){var e=document.getElementsByTagName("head")[0],t="//easy.myfonts.net/v2/js?sid=196848(font-family=Grumpy+Black+24)&key=zYSUJW1plZ",n="https:"==document.location.protocol?"https:":"http:",r=document.createElement("script");r.type="text/javascript";r.async=true;r.src=n+t;e.appendChild(r);var i=setInterval(function(){if($("#mfPreviewBar, #mfPreviewBarShow").length){$("#mfPreviewBar, #mfPreviewBarShow").remove();clearInterval(i)}},10)}};wesual.mailChimpForm={init:function(){$(".js-mailchimp").on("submit",$.proxy(this.onFormPost,this))},onFormPost:function(e){e.preventDefault();var t=$(e.target).find('input[name="EMAIL"]');var n=document.createElement("a");n.href=$("#mc-embedded-subscribe-form").attr("action");n.pathname+="-json";$.ajax(n.href,{dataType:"jsonp",jsonp:"c",data:{EMAIL:t.val()}}).done(function(e){if(e.result=="success"){$(".js-sign-up-form").remove();$(".success-msg-container-js").show();ga("send","event","signup","success")}else if(e.result=="error"){t.addClass("input-error")}})}};wesual.slider={$el:$(".js-slider"),$slides:$(".js-slider-viewport").children(),$pagination:$(".js-slider-pagination"),currentIndex:0,inTransition:false,init:function(){this.buildPagination();this.bindEvents()},bindEvents:function(){var e=this;this.$pagination.on("click","li",$.proxy(this.onPaginationClick,this));this.$slides.add(".slider-glare").on("click",function(){clearInterval(e.autoSlide);e.showNextSlide.call(e)})},buildPagination:function(){var e=$("<li>");for(var t=0;t<this.$slides.length;++t){this.$pagination.append(e.clone())}this.$pagination.children(":first").addClass("active")},startAutoSlide:function(){var e=this;this.autoSlide=setInterval(function(){e.showNextSlide()},5e3)},onPaginationClick:function(e){var t=$(e.currentTarget),n=t.index();if(this.currentIndex===n||this.inTransition)return false;clearInterval(this.autoSlide);this.goToSlideIndex(n);this.updatePagination(n)},updatePagination:function(e){if(e>this.$slides.length-1)e=0;this.$pagination.find(".active").removeClass("active");this.$pagination.children().eq(e).addClass("active")},showNextSlide:function(){var e=this.$slides.filter(".active").index();if(this.inTransition)return false;this.goToSlideIndex(e+1);this.updatePagination(e+1)},goToSlideIndex:function(e){var t=this;this.inTransition=true;if(e>this.$slides.length-1)e=0;this.currentIndex=e;this.$slides.filter(".active").addClass("remove");this.$slides.eq(e).addClass("active");setTimeout(function(){t.$slides.filter(".remove").removeClass("active remove");t.inTransition=false},1e3)}};$(function(){wesual.init()})